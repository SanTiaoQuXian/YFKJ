(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c6deed4"],{"09f4":function(t,e,i){"use strict";i.d(e,"a",function(){return n}),Math.easeInOutQuad=function(t,e,i,s){return t/=s/2,t<1?i/2*t*t+e:(t--,-i/2*(t*(t-2)-1)+e)};var s=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function a(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function o(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function n(t,e,i){var n=o(),l=t-n,r=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=r;var o=Math.easeInOutQuad(c,n,l,e);a(o),c<e?s(t):i&&"function"===typeof i&&i()};u()}},2587:function(t,e,i){"use strict";var s=i("b69d"),a=i.n(s);a.a},"83d4":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container"},[i("div",{staticClass:"filter-container"},[i("el-button",{staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.handleCreate}},[t._v("\n            添加\n        ")])],1),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.list,"empty-text":"暂无数据",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{label:"ID",prop:"id",sortable:"custom",align:"center",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.id))])]}}])}),i("el-table-column",{attrs:{label:"序号",prop:"order_id",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.order_id))])]}}])}),i("el-table-column",{attrs:{label:"序号",prop:"type",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.type?i("span",[t._v("广告")]):t._e(),2==e.row.type?i("span",[t._v("项目方")]):t._e()]}}])}),i("el-table-column",{attrs:{label:"图片",prop:"pic",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{attrs:{width:"50",src:t.row.pic,alt:"scope.row.pic"}})]}}])}),i("el-table-column",{attrs:{label:"添加时间",prop:"create_time",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.create_time))])]}}])}),i("el-table-column",{attrs:{label:"操作",align:"center",width:"230","class-name":"small-padding fixed-width"},scopedSlots:t._u([{key:"default",fn:function(e){var s=e.row;return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){return t.handleUpdate(s)}}},[t._v("\n          编辑\n        ")]),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(e){return t.deleteConfirm(s)}}},[t._v("\n          删除\n        ")])]}}])})],1),i("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.listQuery.page,limit:t.listQuery.limit},on:{"update:page":function(e){return t.$set(t.listQuery,"page",e)},"update:limit":function(e){return t.$set(t.listQuery,"limit",e)},pagination:t.getList}}),i("el-dialog",{attrs:{title:t.textMap[t.dialogStatus],visible:t.dialogFormVisible},on:{open:t.dialogOpen,"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{ref:"dataForm",attrs:{rules:t.rules,model:t.form,"label-position":"left","label-width":"120px"}},[i("el-form-item",{attrs:{label:"序号",prop:"order_id"}},[i("el-input",{model:{value:t.form.order_id,callback:function(e){t.$set(t.form,"order_id",e)},expression:"form.order_id"}})],1),i("el-form-item",{attrs:{label:"类型",required:""}},[i("el-radio",{attrs:{label:1},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[t._v("广告")]),i("el-radio",{attrs:{label:2},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[t._v("项目方")])],1),i("attachment",{attrs:{label:"图片",prop:"pic",maxcount:"1",defaultList:t.form.pic},on:{listenToChooseImg:t.returnImg}}),i("el-form-item",{attrs:{label:"内容",prop:"title"}},[i("tinymce",{ref:"adtinymce",attrs:{height:200},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1)],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("\n        取消\n      ")]),i("el-button",{attrs:{type:"primary"},on:{click:t.createData}},[t._v("\n        确认\n      ")])],1)],1)],1)},a=[],o=i("b775");function n(t){return Object(o["a"])({url:"/ad/list",method:"get",params:t})}function l(t){return Object(o["a"])({url:"/ad/create",method:"post",data:t})}function r(t){return Object(o["a"])({url:"/ad/delete",method:"post",data:t})}var c=i("333d"),u=i("c3f2"),d=i("8256"),m={name:"Ad",components:{Pagination:c["a"],Attachment:u["a"],Tinymce:d["a"]},data:function(){return{list:null,total:0,listQuery:{page:1,limit:20,title:""},dialogStatus:"",dialogFormVisible:!1,form:{id:"",order_id:"",type:1,pic:"",content:""},textMap:{create:"新增广告",update:"修改广告"},listLoading:!1,rules:{order_id:[{required:!0,message:"序号必须填写",trigger:"blur"}],pic:[{required:!0,message:"请选择图片",trigger:"blur"}]}}},mounted:function(){this.getList()},methods:{dialogOpen:function(){var t=this;this.$nextTick(function(){t.$refs.adtinymce.setContent(t.form.content)})},resetForm:function(){this.form={id:"",order_id:"",pic:"",type:1,content:""}},handleFilter:function(){this.listQuery.page=1,this.getList()},getList:function(){var t=this;this.listLoading=!0,n(this.listQuery).then(function(e){t.list=e.data.list,t.total=e.data.total,setTimeout(function(){t.listLoading=!1},500)})},handleUpdate:function(t){this.form.id=t.id,this.form.order_id=t.order_id,this.form.pic=t.pic,this.form.type=t.type,this.form.content=t.content,this.dialogStatus="update",this.dialogFormVisible=!0},handleCreate:function(){this.resetForm(),this.dialogStatus="create",this.dialogFormVisible=!0},createData:function(){var t=this;this.$refs["dataForm"].validate(function(e){e&&l(t.form).then(function(e){t.dialogFormVisible=!1,2e4===e.code&&(t.$message({type:"success",message:"操作成功!"}),t.getList())})})},deleteConfirm:function(t){var e=this;this.$confirm("此操作将永久删除该记录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteData(t)}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},deleteData:function(t){var e=this;r({id:t.id}).then(function(t){e.$message({type:"success",message:"删除成功!"}),e.getList()})},returnImg:function(t){this.form.pic=t}}},p=m,h=(i("924b"),i("2877")),f=Object(h["a"])(p,s,a,!1,null,"22266de0",null);e["default"]=f.exports},"8b04":function(t,e,i){},"924b":function(t,e,i){"use strict";var s=i("8b04"),a=i.n(s);a.a},a796:function(t,e,i){"use strict";i.d(e,"a",function(){return a});var s=i("b775");function a(t){return Object(s["a"])({url:"/attachment/list",method:"get",params:t})}},aa77:function(t,e,i){var s=i("5ca1"),a=i("be13"),o=i("79e5"),n=i("fdef"),l="["+n+"]",r="​",c=RegExp("^"+l+l+"*"),u=RegExp(l+l+"*$"),d=function(t,e,i){var a={},l=o(function(){return!!n[t]()||r[t]()!=r}),c=a[t]=l?e(m):n[t];i&&(a[i]=c),s(s.P+s.F*l,"String",a)},m=d.trim=function(t,e){return t=String(a(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(u,"")),t};t.exports=d},b69d:function(t,e,i){},c3f2:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-form-item",{attrs:{label:t.label,prop:t.prop}},[i("ul",{staticClass:"el-upload-list el-upload-list--picture-card"},[t._l(t.showList,function(e,s){return[i("li",{staticClass:"el-upload-list__item is-ready",attrs:{tabindex:"0"}},[i("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:e,alt:""}}),i("a",{staticClass:"el-upload-list__item-name"},[i("i",{staticClass:"el-icon-document"})]),i("label",{staticClass:"el-upload-list__item-status-label"},[i("i",{staticClass:"el-icon-upload-success el-icon-check"})]),i("i",{staticClass:"el-icon-close"}),i("i",{staticClass:"el-icon-close-tip"},[t._v("按 delete 键可删除")]),i("span",{staticClass:"el-upload-list__item-actions"},[i("span",{staticClass:"el-upload-list__item-preview"},[i("i",{staticClass:"el-icon-zoom-in",on:{click:function(i){return t.zoomImgInfo(e)}}})]),i("span",{staticClass:"el-upload-list__item-delete"},[i("i",{staticClass:"el-icon-delete",on:{click:function(e){return t.delShowItem(s)}}})])])])]})],2),i("div",{staticClass:"el-upload el-upload--picture-card",class:{chooseBtn:1==t.maxcount&&t.showList.length>0},attrs:{tabindex:"0"},on:{click:function(e){t.uploadDialogVisible=!t.uploadDialogVisible}}},[i("i",{staticClass:"el-icon-plus"})])]),i("el-dialog",{attrs:{visible:t.uploadDialogVisible,width:"620px","show-close":!0,"before-close":t.handleClose,center:"","append-to-body":""},on:{"update:visible":function(e){t.uploadDialogVisible=e}}},[i("span",{staticStyle:{"padding-top":"0"}},[i("div",{staticClass:"attachment-list-region pull-right"},[i("el-upload",{staticClass:"upload-demo",attrs:{action:t.uploadImageUrl,"show-file-list":!1,"on-success":t.handleUploadSuccess,"before-upload":t.beforeUpload}},[i("el-button",{staticStyle:{"margin-bottom":"12px"},attrs:{size:"small",type:"success"}},[t._v("点击上传")])],1),i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticClass:"rc-upload-materials clearfix"},[i("ul",{staticClass:"image-list"},[t._l(t.imgList,function(e,s){return[i("li",{staticClass:"image-item",on:{click:function(e){return t.chooseImg(s)}}},[i("div",{staticClass:"image-box",style:{backgroundImage:"url("+e.backpath+")"}}),i("div",{staticClass:"image-meta"},[t._v(t._s(e.size.width)+"*"+t._s(e.size.height))]),i("div",{staticClass:"image-title-wrap",attrs:{title:"message.png"}},[i("p",{staticClass:"image-title"},[t._v(t._s(e.filename))]),i("p",{staticClass:"image-title-ext"})]),t._l(t.chooseList,function(e,a){return s==e?[i("div",{staticClass:"attachment-selected"},[i("i",{staticClass:"selected-index"},[t._v(t._s(a+1))])])]:t._e()})],2)]})],2)])],1),i("el-pagination",{staticStyle:{"margin-top":"15px"},attrs:{small:"",background:"",layout:"prev, pager, next",total:t.imgCount,"current-page":t.currentPage},on:{"current-change":t.handleCurrentChange}})],1),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.chooseSure}},[t._v("确认")])],1)]),t.zoomDialogVisible?i("el-dialog",{attrs:{visible:t.zoomDialogVisible,width:"400px","show-close":!0,center:"","append-to-body":""},on:{"update:visible":function(e){t.zoomDialogVisible=e}}},[i("span",{staticStyle:{"padding-top":"0"}},[i("img",{attrs:{src:t.zoomImg,alt:"图片",width:"100%"}})])]):t._e()],1)},a=[],o=(i("ac6a"),i("a796")),n={name:"attachment",props:["label","prop","maxcount","defaultList"],data:function(){return{listLoading:!1,uploadImageUrl:"",uploadDialogVisible:!1,imgList:[],currentPage:1,imgCount:0,chooseList:[],showList:[],zoomDialogVisible:!1,zoomImg:""}},mounted:function(){this.uploadImageUrl="/admin/upload/index",1==this.maxcount?(this.showList=[],this.defaultList&&this.defaultList.length>0&&this.showList.push(this.defaultList)):(this.showList=this.defaultList,console.log(this.showList)),this.getImageData()},watch:{defaultList:function(t){1==this.maxcount?(this.showList.splice(0,this.showList.length),""!=this.defaultList&&this.showList.push(this.defaultList)):this.showList=this.defaultList}},methods:{getImageData:function(){var t=this;this.listLoading=!0,this.chooseList.splice(0,this.chooseList.length),Object(o["a"])({page:this.currentPage}).then(function(e){t.imgList=e.data.list,t.imgCount=e.data.total,setTimeout(function(){t.listLoading=!1},1500)})},handleCurrentChange:function(t){this.currentPage=t,this.getImageData()},handleClose:function(t){this.chooseList.splice(0,this.chooseList.length),t()},chooseImg:function(t){var e=this.chooseList.indexOf(t);e>-1?this.chooseList.splice(e,1):1==this.maxcount?(this.chooseList.splice(0,this.chooseList.length),this.chooseList.push(t)):this.chooseList.length+this.showList.length<this.maxcount||0==this.maxcount?this.chooseList.push(t):this.$message.error("最多只能选择"+this.maxcount+"张图片")},chooseSure:function(){var t=this;this.chooseList.length>0&&(1==this.maxcount&&this.showList.splice(0,this.chooseList.length),this.chooseList.forEach(function(e){var i=t.imgList[e].backpath;t.showList.push(i)}),this.chooseList.splice(0,this.chooseList.length)),1==this.maxcount?this.$emit("listenToChooseImg",this.showList[0]):this.$emit("listenToChooseImg",this.showList),this.uploadDialogVisible=!1},delShowItem:function(t){this.showList.splice(t,1),1==this.maxcount?this.$emit("listenToChooseImg",""):this.$emit("listenToChooseImg",this.showList)},zoomImgInfo:function(t){this.zoomImg=t,this.zoomDialogVisible=!0},handleUploadSuccess:function(t,e){this.getImageData()},beforeUpload:function(t){var e="image/jpeg"===t.type||"image/png"===t.type||"image/gif"===t.type,i=t.size/1024/1024<3;return e||this.$message.error("上传图片只能是 JPG PNG GIF 格式!"),i||this.$message.error("上传图片大小不能超过 3MB!"),e&&i}}},l=n,r=(i("2587"),i("2877")),c=Object(r["a"])(l,s,a,!1,null,"4d32b645",null);e["a"]=c.exports},c5f6:function(t,e,i){"use strict";var s=i("7726"),a=i("69a8"),o=i("2d95"),n=i("5dbc"),l=i("6a99"),r=i("79e5"),c=i("9093").f,u=i("11e9").f,d=i("86cc").f,m=i("aa77").trim,p="Number",h=s[p],f=h,g=h.prototype,b=o(i("2aeb")(g))==p,v="trim"in String.prototype,_=function(t){var e=l(t,!1);if("string"==typeof e&&e.length>2){e=v?e.trim():m(e,3);var i,s,a,o=e.charCodeAt(0);if(43===o||45===o){if(i=e.charCodeAt(2),88===i||120===i)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:s=2,a=49;break;case 79:case 111:s=8,a=55;break;default:return+e}for(var n,r=e.slice(2),c=0,u=r.length;c<u;c++)if(n=r.charCodeAt(c),n<48||n>a)return NaN;return parseInt(r,s)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof h&&(b?r(function(){g.valueOf.call(i)}):o(i)!=p)?n(new f(_(e)),i,h):_(e)};for(var y,L=i("9e1e")?c(f):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;L.length>w;w++)a(f,y=L[w])&&!a(h,y)&&d(h,y,u(f,y));h.prototype=g,g.constructor=h,i("2aba")(s,p,h)}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);