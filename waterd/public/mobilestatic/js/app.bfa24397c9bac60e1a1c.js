webpackJsonp([19],{"34f/":function(e,n){},"5G8p":function(e,n){},BawW:function(e,n){},IcnI:function(e,n,t){"use strict";var r=t("7+uW"),a=t("2bvH"),o={token:function(e){return e.user.token},avatar:function(e){return e.user.avatar},name:function(e){return e.user.name},wechat:function(e){return e.user.wechat}},i=t("//Fk"),u=t.n(i),c=t("vMJZ"),s=t("TIfe"),l={namespaced:!0,state:{token:Object(s.a)(),name:"",avatar:"",wechat:""},mutations:{SET_TOKEN:function(e,n){e.token=n},SET_NAME:function(e,n){e.name=n},SET_AVATAR:function(e,n){e.avatar=n},SET_WECHAT:function(e,n){e.wechat=n}},actions:{login:function(e,n){var t=e.commit,r=n.username,a=n.password;return new u.a(function(e,n){Object(c.b)({username:r.trim(),password:a}).then(function(n){var r=n;t("SET_TOKEN",r.token),Object(s.c)(r.token),e(r)}).catch(function(e){n(e)})})},getInfo:function(e){var n=e.commit,t=e.state;return new u.a(function(e,r){Object(c.a)(t.token).then(function(t){var a=t;a||r("Verification failed, please Login again.");var o=a.nickname,i=a.avatar,u=a.wechat_code;n("SET_NAME",o),n("SET_AVATAR",i),n("SET_WECHAT",u),e(a)}).catch(function(e){r(e)})})},logout:function(e){var n=e.commit,t=e.state;return new u.a(function(e,r){Object(c.c)(t.token).then(function(){n("SET_TOKEN",""),n("SET_NAME",""),n("SET_AVATAR",""),n("SET_WECHAT",""),Object(s.b)(),e()}).catch(function(e){r(e)})})},resetToken:function(e){var n=e.commit;return new u.a(function(e){n("SET_TOKEN",""),Object(s.b)(),e()})},setWechat:function(e,n){var t=e.commit;return new u.a(function(e){t("SET_WECHAT",n),e()})},setAvatar:function(e,n){var t=e.commit;return new u.a(function(e){t("SET_AVATAR",n),e()})},setName:function(e,n){var t=e.commit;return new u.a(function(e){t("SET_NAME",n),e()})}}};r.a.use(a.a);var f=new a.a.Store({modules:{app:app,user:l},getters:o});n.a=f},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("7+uW"),a={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var o,i=t("VU/8")({name:"App"},a,!1,function(e){t("34f/")},null,null).exports,u=t("YaEn"),c=t("IcnI"),s=(t("uYw/"),t("Xxa5")),l=t.n(s),f=t("exGp"),m=t.n(f),p=t("TIfe"),h=this,d=["/","/login","/register","/mine","/waterd","/rule"];u.a.beforeEach((o=m()(l.a.mark(function e(n,t,r){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object(p.a)()){e.next=24;break}if("/login"!==n.path){e.next=6;break}r({path:"/"}),e.next=22;break;case 6:if(!c.a.getters.name){e.next=11;break}r(),e.next=22;break;case 11:return e.prev=11,e.next=14,c.a.dispatch("user/getInfo");case 14:r(),e.next=22;break;case 17:return e.prev=17,e.t0=e.catch(11),e.next=21,c.a.dispatch("user/resetToken");case 21:r("/login?redirect="+n.path);case 22:e.next=25;break;case 24:-1!==d.indexOf(n.path)?r():r("/login?redirect="+n.path);case 25:case"end":return e.stop()}},e,h,[[11,17]])})),function(e,n,t){return o.apply(this,arguments)})),u.a.afterEach(function(){}),r.a.config.productionTip=!1,r.a.prototype.$phonemodel="h5",r.a.prototype.$version="1.4",new r.a({el:"#app",router:u.a,store:c.a,components:{App:i},template:"<App/>"})},TIfe:function(e,n,t){"use strict";n.a=function(){return localStorage.getItem(a)},n.c=function(e){return localStorage.setItem(a,e)},n.b=function(){return localStorage.removeItem(a)};var r=t("sqb0"),a=(t.n(r),"vue_wtree_mobile_token")},YaEn:function(e,n,t){"use strict";var r=t("7+uW"),a=t("/ocq");r.a.use(a.a),n.a=new a.a({routes:[{path:"/",name:"Index",component:function(){return Promise.all([t.e(0),t.e(1)]).then(t.bind(null,"Fw7Z"))}},{path:"/login",name:"Login",component:function(){return Promise.all([t.e(0),t.e(6)]).then(t.bind(null,"fAfb"))}},{path:"/register",name:"Register",component:function(){return Promise.all([t.e(0),t.e(4)]).then(t.bind(null,"4R6/"))}},{path:"/waterd",name:"Waterd",component:function(){return Promise.all([t.e(0),t.e(2)]).then(t.bind(null,"PIfQ"))}},{path:"/mine",name:"Mine",component:function(){return Promise.all([t.e(0),t.e(5)]).then(t.bind(null,"MtoQ"))}},{path:"/wallet",name:"Wallet",component:function(){return Promise.all([t.e(0),t.e(9)]).then(t.bind(null,"pylK"))}},{path:"/transfer",name:"Transfer",component:function(){return Promise.all([t.e(0),t.e(17)]).then(t.bind(null,"xaJ8"))}},{path:"/withdraw",name:"Withdraw",component:function(){return Promise.all([t.e(0),t.e(11)]).then(t.bind(null,"qbn8"))}},{path:"/opinion",name:"Opinion",component:function(){return Promise.all([t.e(0),t.e(16)]).then(t.bind(null,"GAnX"))}},{path:"/notice",name:"Notice",component:function(){return Promise.all([t.e(0),t.e(7)]).then(t.bind(null,"s3P6"))}},{path:"/noticedetail",name:"Noticedetail",component:function(){return Promise.all([t.e(0),t.e(12)]).then(t.bind(null,"hEKC"))}},{path:"/invite",name:"Invite",component:function(){return Promise.all([t.e(0),t.e(10)]).then(t.bind(null,"Mhc5"))}},{path:"/wechat",name:"Wechat",component:function(){return Promise.all([t.e(0),t.e(8)]).then(t.bind(null,"NgKl"))}},{path:"/setting",name:"Setting",component:function(){return Promise.all([t.e(0),t.e(14)]).then(t.bind(null,"ld3D"))}},{path:"/rule",name:"Rule",component:function(){return Promise.all([t.e(0),t.e(3)]).then(t.bind(null,"ehq0"))}},{path:"/backup",name:"Backup",component:function(){return Promise.all([t.e(0),t.e(13)]).then(t.bind(null,"11kL"))}},{path:"/thirdRe",name:"ThirdRe",component:function(){return Promise.all([t.e(0),t.e(15)]).then(t.bind(null,"pUB7"))}}]})},ZIh6:function(e,n){},boAg:function(e,n){},"uYw/":function(e,n){},vLgD:function(e,n,t){"use strict";t("hxht");var r=t("BdGv"),a=t("//Fk"),o=t.n(a),i=t("Muz9"),u=t.n(i),c=t("IcnI"),s=(t("YaEn"),t("TIfe")),l=t("BO1k"),f=t.n(l),m=t("mgIi"),p=t.n(m);var h=u.a.create({baseURL:"http://shuidihuan.name/api",withCredentials:!0,timeout:5e3});h.interceptors.request.use(function(e){return c.a.getters.token&&(e.headers.token=Object(s.a)()),e.headers.sign=function(e){var n="",t=[];e.params?t=e.params:e.data&&(t=e.data);var r=[];for(var a in t)r.push(a);var o=r.sort(),i=!0,u=!1,c=void 0;try{for(var s,l=f()(o);!(i=(s=l.next()).done);i=!0){var m=s.value;n+=m+"="+t[m]+"&"}}catch(e){u=!0,c=e}finally{try{!i&&l.return&&l.return()}finally{if(u)throw c}}return n=n.slice(0,-1),p.a.HmacSHA256(n,"wtreeappkey").toString()}(e),e},function(e){return console.log(e),o.a.reject(e)}),h.interceptors.response.use(function(e){var n=e.data;return n?0===n.status?o.a.reject(new Error(n.msg||"Error")):n.status>1e4&&n.status<2e4?o.a.reject(new Error("登录失效")):20001===n.status?o.a.reject():30002===n.status?(r.a.alert({title:"系统提醒",message:n.msg}).then(function(){}),o.a.reject()):1===n.status?n.data:o.a.reject(new Error("debug:"+n)):o.a.reject(new Error("nothing"))},function(e){return console.log("err"+e),o.a.reject(e)});n.a=h},vMJZ:function(e,n,t){"use strict";n.d=function(e){return Object(r.a)({url:"/user/register",method:"post",data:e})},n.b=function(e){return Object(r.a)({url:"/user/login",method:"post",data:e})},n.a=function(e){return Object(r.a)({url:"/user/authInfo",method:"get",params:{token:e}})},n.c=function(){return Object(r.a)({url:"/user/logout",method:"post"})};var r=t("vLgD")}},["NHnr"]);
//# sourceMappingURL=app.bfa24397c9bac60e1a1c.js.map