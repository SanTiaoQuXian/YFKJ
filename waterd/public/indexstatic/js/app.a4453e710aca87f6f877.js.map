{"version":3,"sources":["webpack:///./src/store/getters.js","webpack:///./src/store/modules/user.js","webpack:///./src/store/index.js","webpack:///./src/App.vue?d029","webpack:///./src/App.vue","webpack:///./src/permission.js","webpack:///src/App.vue","webpack:///./src/main.js","webpack:///./src/utils/auth.js","webpack:///./src/router/index.js","webpack:///./src/utils/request.js","webpack:///./src/utils/sign.js","webpack:///./src/api/user.js"],"names":["getters","token","state","user","avatar","name","wechat","modules_user","namespaced","getToken","mutations","SET_TOKEN","SET_NAME","SET_AVATAR","SET_WECHAT","actions","login","_ref","userInfo","commit","username","password","promise_default","a","resolve","reject","trim","then","response","data","setToken","catch","error","getInfo","_ref2","nickname","wechat_code","logout","_ref3","removeToken","resetToken","_ref4","setWechat","_ref5","img","setAvatar","_ref6","setName","_ref7","Vue","use","Vuex","store","Store","modules","app","selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","ssrContext","whiteList","router","beforeEach","asyncToGenerator_default","regenerator_default","mark","_callee","to","from","next","wrap","_context","prev","path","dispatch","t0","indexOf","stop","_this","_x","_x2","_x3","apply","arguments","afterEach","config","productionTip","ElementUI","el","components","App","template","__webpack_exports__","Cookies","get","TokenKey","set","remove","__WEBPACK_IMPORTED_MODULE_0_js_cookie__","__WEBPACK_IMPORTED_MODULE_0_js_cookie___default","n","__WEBPACK_IMPORTED_MODULE_0_vue__","__WEBPACK_IMPORTED_MODULE_1_vue_router__","Router","routes","component","Promise","all","e","bind","service","axios","create","baseURL","process","withCredentials","timeout","interceptors","request","headers","signStr","params","pArray","p","push","sArray","sort","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","done","item","value","err","return","slice","Cryptojs","HmacSHA256","toString","getSign","console","log","res","status","Error","msg","replace","query","redirect","currentRoute","fullPath","Message","message","type","url","method","__WEBPACK_IMPORTED_MODULE_0__utils_request__"],"mappings":"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","file":"indexstatic/js/app.a4453e710aca87f6f877.js","sourcesContent":["const getters = {\n  token: state => state.user.token,\n  avatar: state => state.user.avatar,\n  name: state => state.user.name,\n    wechat: state => state.user.wechat\n}\nexport default getters\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/getters.js","import { login, logout, getInfo, uploadWechat } from '../../api/user'\nimport { getToken, setToken, removeToken } from '@/utils/auth'\n\nconst state = {\n  token: getToken(),\n  name: '',\n  avatar: '',\n    wechat: '',\n}\n\nconst mutations = {\n  SET_TOKEN: (state, token) => {\n    state.token = token\n  },\n  SET_NAME: (state, name) => {\n    state.name = name\n  },\n  SET_AVATAR: (state, avatar) => {\n    state.avatar = avatar\n  },\n  SET_WECHAT: (state, wechat) => {\n    state.wechat = wechat\n  },\n}\n\nconst actions = {\n  // user login\n  login({ commit }, userInfo) {\n    const { username, password } = userInfo\n    return new Promise((resolve, reject) => {\n      login({ username: username.trim(), password: password }).then(response => {\n        const data = response\n        commit('SET_TOKEN', data.token)\n        setToken(data.token)\n        resolve(data)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // get user info\n  getInfo({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      getInfo(state.token).then(response => {\n        const data  = response\n        if (!data) {\n          reject('Verification failed, please Login again.')\n        }\n\n        const { nickname, avatar, wechat_code } = data\n\n        commit('SET_NAME', nickname)\n        commit('SET_AVATAR', avatar)\n        commit('SET_WECHAT', wechat_code)\n        resolve(data)\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // user logout\n  logout({ commit, state }) {\n    return new Promise((resolve, reject) => {\n      logout(state.token).then(() => {\n          commit('SET_TOKEN', '')\n          commit('SET_NAME', '')\n          commit('SET_AVATAR', '')\n          commit('SET_WECHAT', '')\n        removeToken()\n        resolve()\n      }).catch(error => {\n        reject(error)\n      })\n    })\n  },\n\n  // remove token\n  resetToken({ commit }) {\n    return new Promise(resolve => {\n      commit('SET_TOKEN', '')\n      removeToken()\n      resolve()\n    })\n  },\n\n    setWechat({ commit }, img) {\n        return new Promise(resolve => {\n            commit('SET_WECHAT', img)\n            resolve()\n        })\n    },\n    setAvatar({ commit}, img) {\n        return new Promise(resolve => {\n            commit('SET_AVATAR', img)\n            resolve()\n        })\n    },\n    setName({ commit}, name) {\n        return new Promise(resolve => {\n            commit('SET_NAME', name)\n            resolve()\n        })\n    },\n}\n\nexport default {\n  namespaced: true,\n  state,\n  mutations,\n  actions\n}\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/modules/user.js","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport getters from './getters'\nimport user from './modules/user'\n\n\nVue.use(Vuex)\n\nconst store = new Vuex.Store({\n  modules: {\n    app,\n    user\n  },\n  getters\n})\n\nexport default store\n\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-1118889c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1118889c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1118889c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1118889c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import router from './router'\nimport store from './store'\nimport { getToken } from '@/utils/auth' // get token from cookie\n\n\nconst whiteList = ['/', '/login', '/register', '/rule'] // no redirect whitelist\n\nrouter.beforeEach(async(to, from, next) => {\n\n  // determine whether the user has logged in\n  const hasToken = getToken()\n\n  if (hasToken) {\n    if (to.path === '/login') {\n      // if is logged in, redirect to the home page\n      next({ path: '/' })\n\n    } else {\n      const hasGetUserInfo = store.getters.name\n      if (hasGetUserInfo) {\n        next()\n      } else {\n        try {\n          // get user info\n          await store.dispatch('user/getInfo')\n          next()\n\n        } catch (error) {\n          // remove token and go to login page to re-login\n          await store.dispatch('user/resetToken')\n          next(`/login?redirect=${to.path}`)\n        }\n      }\n    }\n  } else {\n    /* has no token */\n    if (whiteList.indexOf(to.path) !== -1) {\n      // in the free login whitelist, go directly\n      next()\n    } else {\n      // other pages that do not have permission to access are redirected to the login page.\n      next(`/login?redirect=${to.path}`)\n\n    }\n  }\n})\n\nrouter.afterEach(() => {\n  // finish progress bar\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/permission.js","<template>\n  <div id=\"app\">\n\n    <router-view/>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'App'\n}\n</script>\n\n<style scoped>\n\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport store from './store'\nVue.config.productionTip = false\n\nimport \"./static/css/public.css\";\n\nimport '@/permission' // permission control\n\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nVue.use(ElementUI);\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n    store,\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import Cookies from 'js-cookie'\n\nconst TokenKey = 'vue_wtree_token'\n\nconst Login = 'vue_wtree_app_login'\n\nexport function getToken() {\n  return Cookies.get(TokenKey)\n}\n\nexport function setToken(token) {\n  return Cookies.set(TokenKey, token)\n}\n\nexport function removeToken() {\n  return Cookies.remove(TokenKey)\n}\n\nexport function getLogin() {\n    return Cookies.get(Login)\n}\n\nexport function setLogin(token) {\n    return Cookies.set(Login, token)\n}\n\nexport function removeLogin() {\n    return Cookies.remove(Login)\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/auth.js","import Vue from 'vue'\nimport Router from 'vue-router'\nVue.use(Router)\n\nexport default new Router({\n    routes: [\n        {\n            path: '/',\n            name: 'Index',\n            component: () => import('@/views/index/index')\n        },\n        {\n            path: '/rule',\n            name: 'Rule',\n            component: () => import('@/views/rule/index')\n        },\n        {\n            path: '/login',\n            name: 'Login',\n            component: () => import('@/views/login/index')\n        },\n        {\n            path: '/register',\n            name: 'Register',\n            component: () => import('@/views/register/register')\n        },\n        {\n            path: '/center',\n            name: 'Center',\n            component: () => import('@/views/center/index')\n        },\n        {\n            path: '/transfer',\n            name: 'Transfer',\n            component: () => import('@/views/center/transfer')\n        },\n        {\n            path: '/withdraw',\n            name: 'Withdraw',\n            component: () => import('@/views/center/withdraw')\n        },\n        {\n            path: '/wechat',\n            name: 'Wechat',\n            component: () => import('@/views/center/wechat')\n        },\n        {\n            path: '/invite',\n            name: 'Invite',\n            component: () => import('@/views/center/invite')\n        },\n        {\n            path: '/backup',\n            name: 'Backup',\n            component: () => import('@/views/center/backup')\n        },\n        {\n            path: '/notice',\n            name: 'Notice',\n            component: () => import('@/views/center/notice')\n        }\n    ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","import axios from 'axios'\nimport store from '@/store'\nimport router from '@/router'\nimport { getToken } from '@/utils/auth'\nimport { getSign } from '@/utils/sign'\nimport { MessageBox, Message } from 'element-ui'\n// create an axios instance\nconst service = axios.create({\n  baseURL: process.env.API_ROOT, // url = base url + request url\n  withCredentials: true, // send cookies when cross-domain requests\n  timeout: 5000 // request timeout\n})\n\n// request interceptor\nservice.interceptors.request.use(\n  config => {\n    // do something before request is sent\n    if (store.getters.token) {\n      // let each request carry token\n      // ['X-Token'] is a custom headers key\n      // please modify it according to the actual situation\n      config.headers['token'] = getToken()\n    }\n      config.headers['sign'] = getSign(config)\n    return config\n  },\n  error => {\n    // do something with request error\n    console.log(error) // for debug\n    return Promise.reject(error)\n  }\n)\n\n// response interceptor\nservice.interceptors.response.use(\n  /**\n   * If you want to get http information such as headers or status\n   * Please return  response => response\n  */\n\n  /**\n   * Determine the request status by custom code\n   * Here is just an example\n   * You can also judge the status by HTTP Status Code\n   */\n  response => {\n    const res = response.data\n\n      if (!res)\n      {\n          return Promise.reject(new Error('nothing'))\n      }\n    // if the custom code is not 20000, it is judged as an error.\n    if (res.status === 0) {\n\n      return Promise.reject(new Error(res.msg || 'Error'))\n\n    } else if (res.status > 10000 && res.status < 20000)\n    {\n        /** 登录权限问题 */\n        store.dispatch('user/resetToken').then(() => {\n            router.replace({\n                path: '/login',\n                query: {redirect: router.currentRoute.fullPath}\n            })\n        })\n        return Promise.reject(new Error('登录失效'))\n    } else if (res.status === 20001)\n    {\n        return Promise.reject()\n    } else if (res.status === 30002)\n    {\n        Message({\n            message: res.msg,\n            type: 'error'\n        });\n        return Promise.reject()\n\n    } else if (res.status === 1){\n      return res.data\n    } else\n    {\n        return Promise.reject(new Error('debug:'+res))\n    }\n  },\n  error => {\n    console.log('err' + error) // for debug\n    return Promise.reject(error)\n  }\n)\n\nexport default service\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/request.js","\r\nimport Cryptojs from 'crypto-js'\r\n\r\n// 创建\r\nexport function getSign(config) {\r\n\r\n    let signStr = ''\r\n    let params = []\r\n    if (config.params) {\r\n\r\n        // get\r\n        params = config.params\r\n\r\n    } else if (config.data) {\r\n        // post\r\n        params = config.data\r\n    }\r\n\r\n    // url参数签名\r\n    let pArray = []\r\n    for (let p in params) {\r\n        pArray.push(p)\r\n    }\r\n    let sArray = pArray.sort()\r\n    for (let item of sArray) {\r\n        signStr += item +'=' + params[item] + '&'\r\n    }\r\n    signStr =  signStr.slice(0, -1)\r\n    let key = 'wtreeappkey'\r\n    let hash = Cryptojs.HmacSHA256(signStr, key).toString()\r\n    return hash\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/sign.js","import request from '@/utils/request'\n\nexport function register(data) {\n    return request({\n        url: '/user/register',\n        method: 'post',\n        data\n    })\n}\n\nexport function login(data) {\n  return request({\n    url: '/user/login',\n    method: 'post',\n    data\n  })\n}\n\nexport function getInfo(token) {\n  return request({\n    url: '/user/authInfo',\n    method: 'get',\n    params: { token }\n  })\n}\n\nexport function logout() {\n  return request({\n    url: '/user/logout',\n    method: 'post'\n  })\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/user.js"],"sourceRoot":""}